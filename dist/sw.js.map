{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/sw.js"],"names":[],"mappings":"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","file":"sw.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","const appName = \"restaurant-reviews\"\r\nconst staticCacheName = appName + \"-v1.0\";\r\n\r\nconst contentImgsCache = appName + \"-images\";\r\n\r\nvar allCaches = [\r\n  staticCacheName,\r\n  contentImgsCache\r\n];\r\n\r\n/** At Service Worker Install time, cache all static assets */\r\nself.addEventListener('install', function(event) {\r\n  event.waitUntil(\r\n    caches.open(staticCacheName).then(function(cache) {\r\n      return cache.addAll([\r\n        '/', // this caches index.html\r\n        '/restaurant.html',\r\n        '/css/styles.css',\r\n        \r\n        \r\n        \r\n        '/js/main.js',\r\n        '/js/restaurant_info.js',\r\n         'manifest.json',\r\n        'data/restaurants.json',\r\n\t\t'/images/icon/restaurant-icon-192.png',\r\n\t\t'/images/icon/restaurant-icon-512.png',\r\n        // add other static assets here like logos, svg icons or any\r\n        // other asset needed for your app UI \r\n        // (Don't add restaurant images, as they are not part of your\r\n        // application's UI)\r\n      ]);\r\n    })\r\n  );\r\n});\r\n\r\n/** At Service Worker Activation, Delete previous caches, if any */\r\nself.addEventListener('activate', function(event) {\r\n  event.waitUntil(\r\n    caches.keys().then(function(cacheNames) {\r\n      return Promise.all(\r\n        cacheNames.filter(function(cacheName) {\r\n          return cacheName.startsWith(appName) &&\r\n                 !allCaches.includes(cacheName);\r\n        }).map(function(cacheName) {\r\n          return caches.delete(cacheName);\r\n        })\r\n      );\r\n    })\r\n  );\r\n});\r\n\r\n/** Hijack fetch requests and respond accordingly */\r\nself.addEventListener('fetch', function(event) {\r\n   \r\n   const requestUrl = new URL(event.request.url);\r\n\r\n  // only highjack request made to our app (not mapbox maps or leaflet, for example)\r\n  if (requestUrl.origin === location.origin) {\r\n\r\n    // Since requests made to restaurant.html have search params (like ?id=1), the url can't be used as the\r\n    // key to access the cache, so just respondWith restaurant.html if pathname startsWith '/restaurant.html'\r\n    if (requestUrl.pathname.startsWith('/restaurant.html')) {\r\n      event.respondWith(caches.match('/restaurant.html'));\r\n      return; // Done handling request, so exit early.\r\n    }\r\n\t\r\n\t  // If the request pathname starts with /img, then we need to handle images.\r\n    if (requestUrl.pathname.startsWith('/img')) {\r\n      event.respondWith(serveImage(event.request));\r\n      return; // Done handling request, so exit early.\r\n    }\r\n\t\r\n  }\r\n    \r\n  // Default behavior: respond with cached elements, if any, falling back to network.\r\n  event.respondWith(\r\n    caches.match(event.request).then(function(response) {\r\n      return response || fetch(event.request);\r\n    })\r\n  );\r\n});\r\n\r\n\r\nfunction serveImage(request) {\r\n  let imageStorageUrl = request.url;\r\n\r\n  // Make a new URL with a stripped suffix and extension from the request url\r\n  // i.e. /img/1-medium.jpg  will become  /img/1\r\n  // we'll use this as the KEY for storing image into cache\r\n  imageStorageUrl = imageStorageUrl.replace(/-small\\.\\w{3}|-medium\\.\\w{3}|-large\\.\\w{3}/i, '');\r\n\r\n  return caches.open(contentImgsCache).then(function(cache) {\r\n    return cache.match(imageStorageUrl).then(function(response) {\r\n      // if image is in cache, return it, else fetch from network, cache a clone, then return network response\r\n      return response || fetch(request).then(function(networkResponse) {\r\n        cache.put(imageStorageUrl, networkResponse.clone());\r\n        return networkResponse;\r\n      });\r\n    });\r\n  });\r\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvc3cuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLElBQU0sT0FBTyxHQUFHLG9CQUFoQjtBQUNBLElBQU0sZUFBZSxHQUFHLE9BQU8sR0FBRyxPQUFsQztBQUVBLElBQU0sZ0JBQWdCLEdBQUcsT0FBTyxHQUFHLFNBQW5DO0FBRUEsSUFBSSxTQUFTLEdBQUcsQ0FDZCxlQURjLEVBRWQsZ0JBRmMsQ0FBaEI7QUFLQTs7QUFDQSxJQUFJLENBQUMsZ0JBQUwsQ0FBc0IsU0FBdEIsRUFBaUMsVUFBUyxLQUFULEVBQWdCO0FBQy9DLEVBQUEsS0FBSyxDQUFDLFNBQU4sQ0FDRSxNQUFNLENBQUMsSUFBUCxDQUFZLGVBQVosRUFBNkIsSUFBN0IsQ0FBa0MsVUFBUyxLQUFULEVBQWdCO0FBQ2hELFdBQU8sS0FBSyxDQUFDLE1BQU4sQ0FBYSxDQUNsQixHQURrQixFQUNiO0FBQ0wsc0JBRmtCLEVBR2xCLGlCQUhrQixFQU9sQixhQVBrQixFQVFsQix3QkFSa0IsRUFTakIsZUFUaUIsRUFVbEIsdUJBVmtCLEVBV3hCLHNDQVh3QixFQVl4QixzQ0Fad0IsQ0FBYixDQUFQO0FBa0JELEdBbkJELENBREY7QUFzQkQsQ0F2QkQ7QUF5QkE7O0FBQ0EsSUFBSSxDQUFDLGdCQUFMLENBQXNCLFVBQXRCLEVBQWtDLFVBQVMsS0FBVCxFQUFnQjtBQUNoRCxFQUFBLEtBQUssQ0FBQyxTQUFOLENBQ0UsTUFBTSxDQUFDLElBQVAsR0FBYyxJQUFkLENBQW1CLFVBQVMsVUFBVCxFQUFxQjtBQUN0QyxXQUFPLE9BQU8sQ0FBQyxHQUFSLENBQ0wsVUFBVSxDQUFDLE1BQVgsQ0FBa0IsVUFBUyxTQUFULEVBQW9CO0FBQ3BDLGFBQU8sU0FBUyxDQUFDLFVBQVYsQ0FBcUIsT0FBckIsS0FDQSxDQUFDLFNBQVMsQ0FBQyxRQUFWLENBQW1CLFNBQW5CLENBRFI7QUFFRCxLQUhELEVBR0csR0FISCxDQUdPLFVBQVMsU0FBVCxFQUFvQjtBQUN6QixhQUFPLE1BQU0sQ0FBQyxNQUFQLENBQWMsU0FBZCxDQUFQO0FBQ0QsS0FMRCxDQURLLENBQVA7QUFRRCxHQVRELENBREY7QUFZRCxDQWJEO0FBZUE7O0FBQ0EsSUFBSSxDQUFDLGdCQUFMLENBQXNCLE9BQXRCLEVBQStCLFVBQVMsS0FBVCxFQUFnQjtBQUU1QyxNQUFNLFVBQVUsR0FBRyxJQUFJLEdBQUosQ0FBUSxLQUFLLENBQUMsT0FBTixDQUFjLEdBQXRCLENBQW5CLENBRjRDLENBSTdDOztBQUNBLE1BQUksVUFBVSxDQUFDLE1BQVgsS0FBc0IsUUFBUSxDQUFDLE1BQW5DLEVBQTJDO0FBRXpDO0FBQ0E7QUFDQSxRQUFJLFVBQVUsQ0FBQyxRQUFYLENBQW9CLFVBQXBCLENBQStCLGtCQUEvQixDQUFKLEVBQXdEO0FBQ3RELE1BQUEsS0FBSyxDQUFDLFdBQU4sQ0FBa0IsTUFBTSxDQUFDLEtBQVAsQ0FBYSxrQkFBYixDQUFsQjtBQUNBLGFBRnNELENBRTlDO0FBQ1QsS0FQd0MsQ0FTMUM7OztBQUNDLFFBQUksVUFBVSxDQUFDLFFBQVgsQ0FBb0IsVUFBcEIsQ0FBK0IsTUFBL0IsQ0FBSixFQUE0QztBQUMxQyxNQUFBLEtBQUssQ0FBQyxXQUFOLENBQWtCLFVBQVUsQ0FBQyxLQUFLLENBQUMsT0FBUCxDQUE1QjtBQUNBLGFBRjBDLENBRWxDO0FBQ1Q7QUFFRixHQXBCNEMsQ0FzQjdDOzs7QUFDQSxFQUFBLEtBQUssQ0FBQyxXQUFOLENBQ0UsTUFBTSxDQUFDLEtBQVAsQ0FBYSxLQUFLLENBQUMsT0FBbkIsRUFBNEIsSUFBNUIsQ0FBaUMsVUFBUyxRQUFULEVBQW1CO0FBQ2xELFdBQU8sUUFBUSxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBUCxDQUF4QjtBQUNELEdBRkQsQ0FERjtBQUtELENBNUJEOztBQStCQSxTQUFTLFVBQVQsQ0FBb0IsT0FBcEIsRUFBNkI7QUFDM0IsTUFBSSxlQUFlLEdBQUcsT0FBTyxDQUFDLEdBQTlCLENBRDJCLENBRzNCO0FBQ0E7QUFDQTs7QUFDQSxFQUFBLGVBQWUsR0FBRyxlQUFlLENBQUMsT0FBaEIsQ0FBd0IsNkNBQXhCLEVBQXVFLEVBQXZFLENBQWxCO0FBRUEsU0FBTyxNQUFNLENBQUMsSUFBUCxDQUFZLGdCQUFaLEVBQThCLElBQTlCLENBQW1DLFVBQVMsS0FBVCxFQUFnQjtBQUN4RCxXQUFPLEtBQUssQ0FBQyxLQUFOLENBQVksZUFBWixFQUE2QixJQUE3QixDQUFrQyxVQUFTLFFBQVQsRUFBbUI7QUFDMUQ7QUFDQSxhQUFPLFFBQVEsSUFBSSxLQUFLLENBQUMsT0FBRCxDQUFMLENBQWUsSUFBZixDQUFvQixVQUFTLGVBQVQsRUFBMEI7QUFDL0QsUUFBQSxLQUFLLENBQUMsR0FBTixDQUFVLGVBQVYsRUFBMkIsZUFBZSxDQUFDLEtBQWhCLEVBQTNCO0FBQ0EsZUFBTyxlQUFQO0FBQ0QsT0FIa0IsQ0FBbkI7QUFJRCxLQU5NLENBQVA7QUFPRCxHQVJNLENBQVA7QUFTRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImNvbnN0IGFwcE5hbWUgPSBcInJlc3RhdXJhbnQtcmV2aWV3c1wiXHJcbmNvbnN0IHN0YXRpY0NhY2hlTmFtZSA9IGFwcE5hbWUgKyBcIi12MS4wXCI7XHJcblxyXG5jb25zdCBjb250ZW50SW1nc0NhY2hlID0gYXBwTmFtZSArIFwiLWltYWdlc1wiO1xyXG5cclxudmFyIGFsbENhY2hlcyA9IFtcclxuICBzdGF0aWNDYWNoZU5hbWUsXHJcbiAgY29udGVudEltZ3NDYWNoZVxyXG5dO1xyXG5cclxuLyoqIEF0IFNlcnZpY2UgV29ya2VyIEluc3RhbGwgdGltZSwgY2FjaGUgYWxsIHN0YXRpYyBhc3NldHMgKi9cclxuc2VsZi5hZGRFdmVudExpc3RlbmVyKCdpbnN0YWxsJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuICBldmVudC53YWl0VW50aWwoXHJcbiAgICBjYWNoZXMub3BlbihzdGF0aWNDYWNoZU5hbWUpLnRoZW4oZnVuY3Rpb24oY2FjaGUpIHtcclxuICAgICAgcmV0dXJuIGNhY2hlLmFkZEFsbChbXHJcbiAgICAgICAgJy8nLCAvLyB0aGlzIGNhY2hlcyBpbmRleC5odG1sXHJcbiAgICAgICAgJy9yZXN0YXVyYW50Lmh0bWwnLFxyXG4gICAgICAgICcvY3NzL3N0eWxlcy5jc3MnLFxyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgICcvanMvbWFpbi5qcycsXHJcbiAgICAgICAgJy9qcy9yZXN0YXVyYW50X2luZm8uanMnLFxyXG4gICAgICAgICAnbWFuaWZlc3QuanNvbicsXHJcbiAgICAgICAgJ2RhdGEvcmVzdGF1cmFudHMuanNvbicsXHJcblx0XHQnL2ltYWdlcy9pY29uL3Jlc3RhdXJhbnQtaWNvbi0xOTIucG5nJyxcclxuXHRcdCcvaW1hZ2VzL2ljb24vcmVzdGF1cmFudC1pY29uLTUxMi5wbmcnLFxyXG4gICAgICAgIC8vIGFkZCBvdGhlciBzdGF0aWMgYXNzZXRzIGhlcmUgbGlrZSBsb2dvcywgc3ZnIGljb25zIG9yIGFueVxyXG4gICAgICAgIC8vIG90aGVyIGFzc2V0IG5lZWRlZCBmb3IgeW91ciBhcHAgVUkgXHJcbiAgICAgICAgLy8gKERvbid0IGFkZCByZXN0YXVyYW50IGltYWdlcywgYXMgdGhleSBhcmUgbm90IHBhcnQgb2YgeW91clxyXG4gICAgICAgIC8vIGFwcGxpY2F0aW9uJ3MgVUkpXHJcbiAgICAgIF0pO1xyXG4gICAgfSlcclxuICApO1xyXG59KTtcclxuXHJcbi8qKiBBdCBTZXJ2aWNlIFdvcmtlciBBY3RpdmF0aW9uLCBEZWxldGUgcHJldmlvdXMgY2FjaGVzLCBpZiBhbnkgKi9cclxuc2VsZi5hZGRFdmVudExpc3RlbmVyKCdhY3RpdmF0ZScsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgZXZlbnQud2FpdFVudGlsKFxyXG4gICAgY2FjaGVzLmtleXMoKS50aGVuKGZ1bmN0aW9uKGNhY2hlTmFtZXMpIHtcclxuICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFxyXG4gICAgICAgIGNhY2hlTmFtZXMuZmlsdGVyKGZ1bmN0aW9uKGNhY2hlTmFtZSkge1xyXG4gICAgICAgICAgcmV0dXJuIGNhY2hlTmFtZS5zdGFydHNXaXRoKGFwcE5hbWUpICYmXHJcbiAgICAgICAgICAgICAgICAgIWFsbENhY2hlcy5pbmNsdWRlcyhjYWNoZU5hbWUpO1xyXG4gICAgICAgIH0pLm1hcChmdW5jdGlvbihjYWNoZU5hbWUpIHtcclxuICAgICAgICAgIHJldHVybiBjYWNoZXMuZGVsZXRlKGNhY2hlTmFtZSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgIH0pXHJcbiAgKTtcclxufSk7XHJcblxyXG4vKiogSGlqYWNrIGZldGNoIHJlcXVlc3RzIGFuZCByZXNwb25kIGFjY29yZGluZ2x5ICovXHJcbnNlbGYuYWRkRXZlbnRMaXN0ZW5lcignZmV0Y2gnLCBmdW5jdGlvbihldmVudCkge1xyXG4gICBcclxuICAgY29uc3QgcmVxdWVzdFVybCA9IG5ldyBVUkwoZXZlbnQucmVxdWVzdC51cmwpO1xyXG5cclxuICAvLyBvbmx5IGhpZ2hqYWNrIHJlcXVlc3QgbWFkZSB0byBvdXIgYXBwIChub3QgbWFwYm94IG1hcHMgb3IgbGVhZmxldCwgZm9yIGV4YW1wbGUpXHJcbiAgaWYgKHJlcXVlc3RVcmwub3JpZ2luID09PSBsb2NhdGlvbi5vcmlnaW4pIHtcclxuXHJcbiAgICAvLyBTaW5jZSByZXF1ZXN0cyBtYWRlIHRvIHJlc3RhdXJhbnQuaHRtbCBoYXZlIHNlYXJjaCBwYXJhbXMgKGxpa2UgP2lkPTEpLCB0aGUgdXJsIGNhbid0IGJlIHVzZWQgYXMgdGhlXHJcbiAgICAvLyBrZXkgdG8gYWNjZXNzIHRoZSBjYWNoZSwgc28ganVzdCByZXNwb25kV2l0aCByZXN0YXVyYW50Lmh0bWwgaWYgcGF0aG5hbWUgc3RhcnRzV2l0aCAnL3Jlc3RhdXJhbnQuaHRtbCdcclxuICAgIGlmIChyZXF1ZXN0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9yZXN0YXVyYW50Lmh0bWwnKSkge1xyXG4gICAgICBldmVudC5yZXNwb25kV2l0aChjYWNoZXMubWF0Y2goJy9yZXN0YXVyYW50Lmh0bWwnKSk7XHJcbiAgICAgIHJldHVybjsgLy8gRG9uZSBoYW5kbGluZyByZXF1ZXN0LCBzbyBleGl0IGVhcmx5LlxyXG4gICAgfVxyXG5cdFxyXG5cdCAgLy8gSWYgdGhlIHJlcXVlc3QgcGF0aG5hbWUgc3RhcnRzIHdpdGggL2ltZywgdGhlbiB3ZSBuZWVkIHRvIGhhbmRsZSBpbWFnZXMuXHJcbiAgICBpZiAocmVxdWVzdFVybC5wYXRobmFtZS5zdGFydHNXaXRoKCcvaW1nJykpIHtcclxuICAgICAgZXZlbnQucmVzcG9uZFdpdGgoc2VydmVJbWFnZShldmVudC5yZXF1ZXN0KSk7XHJcbiAgICAgIHJldHVybjsgLy8gRG9uZSBoYW5kbGluZyByZXF1ZXN0LCBzbyBleGl0IGVhcmx5LlxyXG4gICAgfVxyXG5cdFxyXG4gIH1cclxuICAgIFxyXG4gIC8vIERlZmF1bHQgYmVoYXZpb3I6IHJlc3BvbmQgd2l0aCBjYWNoZWQgZWxlbWVudHMsIGlmIGFueSwgZmFsbGluZyBiYWNrIHRvIG5ldHdvcmsuXHJcbiAgZXZlbnQucmVzcG9uZFdpdGgoXHJcbiAgICBjYWNoZXMubWF0Y2goZXZlbnQucmVxdWVzdCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICByZXR1cm4gcmVzcG9uc2UgfHwgZmV0Y2goZXZlbnQucmVxdWVzdCk7XHJcbiAgICB9KVxyXG4gICk7XHJcbn0pO1xyXG5cclxuXHJcbmZ1bmN0aW9uIHNlcnZlSW1hZ2UocmVxdWVzdCkge1xyXG4gIGxldCBpbWFnZVN0b3JhZ2VVcmwgPSByZXF1ZXN0LnVybDtcclxuXHJcbiAgLy8gTWFrZSBhIG5ldyBVUkwgd2l0aCBhIHN0cmlwcGVkIHN1ZmZpeCBhbmQgZXh0ZW5zaW9uIGZyb20gdGhlIHJlcXVlc3QgdXJsXHJcbiAgLy8gaS5lLiAvaW1nLzEtbWVkaXVtLmpwZyAgd2lsbCBiZWNvbWUgIC9pbWcvMVxyXG4gIC8vIHdlJ2xsIHVzZSB0aGlzIGFzIHRoZSBLRVkgZm9yIHN0b3JpbmcgaW1hZ2UgaW50byBjYWNoZVxyXG4gIGltYWdlU3RvcmFnZVVybCA9IGltYWdlU3RvcmFnZVVybC5yZXBsYWNlKC8tc21hbGxcXC5cXHd7M318LW1lZGl1bVxcLlxcd3szfXwtbGFyZ2VcXC5cXHd7M30vaSwgJycpO1xyXG5cclxuICByZXR1cm4gY2FjaGVzLm9wZW4oY29udGVudEltZ3NDYWNoZSkudGhlbihmdW5jdGlvbihjYWNoZSkge1xyXG4gICAgcmV0dXJuIGNhY2hlLm1hdGNoKGltYWdlU3RvcmFnZVVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAvLyBpZiBpbWFnZSBpcyBpbiBjYWNoZSwgcmV0dXJuIGl0LCBlbHNlIGZldGNoIGZyb20gbmV0d29yaywgY2FjaGUgYSBjbG9uZSwgdGhlbiByZXR1cm4gbmV0d29yayByZXNwb25zZVxyXG4gICAgICByZXR1cm4gcmVzcG9uc2UgfHwgZmV0Y2gocmVxdWVzdCkudGhlbihmdW5jdGlvbihuZXR3b3JrUmVzcG9uc2UpIHtcclxuICAgICAgICBjYWNoZS5wdXQoaW1hZ2VTdG9yYWdlVXJsLCBuZXR3b3JrUmVzcG9uc2UuY2xvbmUoKSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldHdvcmtSZXNwb25zZTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSJdfQ=="}